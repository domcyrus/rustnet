[build.env]
passthrough = [
    "CARGO_INCREMENTAL",
    "CARGO_NET_RETRY",
    "CARGO_NET_TIMEOUT",
]

# Install eBPF dependencies for ARM targets
[target.aarch64-unknown-linux-gnu]
pre-build = [
    "dpkg --add-architecture arm64",
    "apt-get update",
    "apt-get install -y libelf-dev:arm64 zlib1g-dev:arm64 pkg-config linux-libc-dev:arm64",
]

[target.aarch64-unknown-linux-musl]
pre-build = [
    "apt-get update",
    "apt-get install -y libelf-dev zlib1g-dev pkg-config linux-libc-dev",
]

[target.armv7-unknown-linux-gnueabihf]
pre-build = [
    "dpkg --add-architecture armhf",
    "apt-get update",
    "apt-get install -y libelf-dev:armhf zlib1g-dev:armhf pkg-config linux-libc-dev:armhf",
]

[target.armv7-unknown-linux-musleabihf]
pre-build = [
    "apt-get update",
    "apt-get install -y libelf-dev zlib1g-dev pkg-config linux-libc-dev",
]

[target.x86_64-unknown-linux-musl]
pre-build = [
    "apt-get update",
    "apt-get install -y libelf-dev zlib1g-dev pkg-config linux-libc-dev",
]